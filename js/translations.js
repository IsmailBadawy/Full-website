// Translations object
const translations = {
    ar: {
        // Navigation
        'platform-name': 'منصة التعلم',
        'translate': 'English',
        'home': 'الرئيسية',
        'courses': 'الدورات',
        'why': 'لماذا نحن ؟',
        'contact': 'تواصل معنا',
        'subscribe': 'إشترك',
        'register': 'تسجيل',
        'logout': 'تسجيل خروج',
        
        // Hero Section
        'hero-title': 'ابدأ رحلة التعلم معنا',
        'hero-subtitle': 'اكتشف مجموعة واسعة من الدورات التعليمية عالية الجودة في مجالات البرمجة والتصميم والتطوير',
        'stats-courses': 'دورة تعليمية',
        'stats-instructors': 'مدرب محترف',
        'stats-students': 'طالب',
        'start-learning': 'ابدأ التعلم الآن',
        
        // Courses Section
        'available-courses': 'الدورات المتاحة',
        'courses-subtitle': 'اختر من بين مجموعة متنوعة من الدورات التعليمية المصممة لتطوير مهاراتك',
        'instructor': 'المدرب',
        'lectures': 'محاضرة',
        'hours': 'ساعة',
        'price': 'السعر',
        'currency': 'ج.م',
        'view-details': 'عرض التفاصيل',
        'enroll-now': 'اشترك الآن',
        'duration': 'المدة',
        'course-details': 'تفاصيل الدورة',
        'close': 'إغلاق',
        
        // Features Section
        'why-choose-us': 'لماذا تختارنا؟',
        'features-subtitle': 'نقدم لك تجربة تعليمية فريدة مع مجموعة من المميزات الحصرية',
        'feature-1-title': 'تعلم عن بعد',
        'feature-1-desc': 'تعلم من أي مكان وفي أي وقت مع دورات تفاعلية عبر الإنترنت',
        'feature-2-title': 'شهادات معتمدة',
        'feature-2-desc': 'احصل على شهادات معتمدة بعد إكمال كل دورة',
        'feature-3-title': 'مدربون محترفون',
        'feature-3-desc': 'تعلم على يد نخبة من المدربين المحترفين في مجالاتهم',
        
        // Registration Form
        'signup-title': 'تسجيل حساب جديد',
        'full-name': 'الاسم الكامل',
        'full-name-placeholder': 'أدخل اسمك الكامل',
        'email': 'البريد الإلكتروني',
        'email-placeholder': 'أدخل بريدك الإلكتروني',
        'password': 'كلمة المرور',
        'password-placeholder': 'أدخل كلمة المرور',
        'toggle-password': 'إظهار/إخفاء كلمة المرور',
        'signup-btn': 'تسجيل حساب جديد',
        
        // Contact Section
        'contact-us': 'تواصل معنا',
        'contact-subtitle': 'نحن هنا لمساعدتك. تواصل معنا لأي استفسار أو مساعدة',
        'contact-name': 'الاسم',
        'contact-name-placeholder': 'أدخل اسمك',
        'contact-email': 'البريد الإلكتروني',
        'contact-email-placeholder': 'أدخل بريدك الإلكتروني',
        'contact-subject': 'الموضوع',
        'contact-subject-placeholder': 'موضوع الرسالة',
        'contact-message': 'الرسالة',
        'contact-message-placeholder': 'اكتب رسالتك هنا',
        'send-message': 'إرسال الرسالة',
        
        // Newsletter Section
        'newsletter-title': 'اشترك في نشرتنا البريدية',
        'newsletter-desc': 'احصل على آخر الأخبار والعروض الحصرية مباشرة إلى بريدك الإلكتروني',
        'newsletter-placeholder': 'أدخل بريدك الإلكتروني',
        'subscribe': 'اشترك',
        
        // Footer
        'about-us': 'عن المنصة',
        'about-desc': 'منصة تعليمية رائدة تقدم دورات عالية الجودة في مجالات البرمجة والتصميم والتطوير',
        'quick-links': 'روابط سريعة',
        'privacy-policy': 'سياسة الخصوصية',
        'terms': 'الشروط والأحكام',
        'contact-info': 'معلومات التواصل',
        'address': 'القاهرة، مصر',
        'phone': '+20 123 456 789',
        'email': 'info@elearning.com',
        'copyright': 'جميع الحقوق محفوظة © 2025 منصة التعلم',
        
        // Messages
        'registration-success': 'تم التسجيل بنجاح!',
        'welcome-message': 'مرحبا بك في منصة التعلم!'
    },
    en: {
        // Navigation
        'platform-name': 'Learning Platform',
        'translate': 'عربي',
        'home': 'Home',
        'courses': 'Courses',
        'why': 'Why Us ?',
        'contact': 'Contact',
        'subscribe': 'Subscribe',
        'register': 'Register',
        'logout': 'Logout',
        
        // Hero Section
        'hero-title': 'Start Your Learning Journey',
        'hero-subtitle': 'Discover a wide range of high-quality educational courses in programming, design, and development',
        'stats-courses': 'Courses',
        'stats-instructors': 'Instructors',
        'stats-students': 'Students',
        'start-learning': 'Start Learning Now',
        
        // Courses Section
        'available-courses': 'Available Courses',
        'courses-subtitle': 'Choose from a variety of educational courses designed to develop your skills',
        'instructor': 'Instructor',
        'lectures': 'Lectures',
        'hours': 'Hours',
        'price': 'Price',
        'currency': 'EGP',
        'view-details': 'View Details',
        'enroll-now': 'Enroll Now',
        'duration': 'Duration',
        'course-details': 'Course Details',
        'close': 'Close',
        
        // Features Section
        'why-choose-us': 'Why Choose Us?',
        'features-subtitle': 'We offer a unique learning experience with a range of exclusive features',
        'feature-1-title': 'Learn Remotely',
        'feature-1-desc': 'Learn from anywhere and at any time with interactive online courses',
        'feature-2-title': 'Certified Certificates',
        'feature-2-desc': 'Get certified certificates after completing each course',
        'feature-3-title': 'Professional Instructors',
        'feature-3-desc': 'Learn from a team of professional instructors in their fields',
        
        // Registration Form
        'signup-title': 'Create New Account',
        'full-name': 'Full Name',
        'full-name-placeholder': 'Enter your full name',
        'email': 'Email Address',
        'email-placeholder': 'Enter your email address',
        'password': 'Password',
        'password-placeholder': 'Enter your password',
        'toggle-password': 'Show/Hide Password',
        'signup-btn': 'Create Account',
        
        // Contact Section
        'contact-us': 'Contact Us',
        'contact-subtitle': 'We are here to help. Contact us for any inquiry or assistance',
        'contact-name': 'Name',
        'contact-name-placeholder': 'Enter your name',
        'contact-email': 'Email Address',
        'contact-email-placeholder': 'Enter your email address',
        'contact-subject': 'Subject',
        'contact-subject-placeholder': 'Message subject',
        'contact-message': 'Message',
        'contact-message-placeholder': 'Write your message here',
        'send-message': 'Send Message',
        
        // Newsletter Section
        'newsletter-title': 'Subscribe to Our Newsletter',
        'newsletter-desc': 'Get the latest news and exclusive offers directly to your email',
        'newsletter-placeholder': 'Enter your email address',
        'subscribe': 'Subscribe',
        
        // Footer
        'about-us': 'About Us',
        'about-desc': 'A leading educational platform offering high-quality courses in programming, design, and development',
        'quick-links': 'Quick Links',
        'privacy-policy': 'Privacy Policy',
        'terms': 'Terms and Conditions',
        'contact-info': 'Contact Information',
        'address': 'Cairo, Egypt',
        'phone': '+20 123 456 789',
        'email': 'info@elearning.com',
        'copyright': 'All rights reserved 2025 Learning Platform',
        
        // Messages
        'registration-success': 'Registration Successful!',
        'welcome-message': 'Welcome to the Learning Platform!'
    }
};

// Function to translate page
function translatePage(lang) {
    console.log('Translating to:', lang); // Debug log

    try {
        // Validate language
        if (!translations[lang]) {
            console.error('Invalid language:', lang);
            lang = 'ar'; // fallback to Arabic
        }

        // Save selected language
        localStorage.setItem('selectedLanguage', lang);
        
        // Update HTML lang attribute and direction
        document.documentElement.lang = lang;
        document.documentElement.dir = lang === 'ar' ? 'rtl' : 'ltr';
        
        // Update Bootstrap CSS
        const bootstrapLink = document.querySelector('link[href*="bootstrap"]');
        if (bootstrapLink) {
            bootstrapLink.href = lang === 'ar' 
                ? 'https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.rtl.min.css'
                : 'https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css';
        }
        
        // Update translate button text
        const translateBtn = document.getElementById('translateBtn');
        if (translateBtn) {
            translateBtn.textContent = translations[lang]['translate'];
        }
        
        // Translate all elements with data-translate attribute
        const elements = document.querySelectorAll('[data-translate]');
        console.log('Found elements to translate:', elements.length); // Debug log
        
        elements.forEach(element => {
            const key = element.getAttribute('data-translate');
            if (!translations[lang][key]) {
                console.warn('Missing translation for key:', key, 'in language:', lang);
                return;
            }
            
            // Handle input placeholders
            if (element.tagName === 'INPUT' && element.hasAttribute('placeholder')) {
                element.placeholder = translations[lang][key + '-placeholder'] || translations[lang][key];
            }
            // Handle button titles
            else if (element.tagName === 'BUTTON' && element.hasAttribute('title')) {
                element.title = translations[lang][key];
            }
            // Handle all other elements
            element.textContent = translations[lang][key];
        });
        
        // Update document title
        document.title = translations[lang]['platform-name'];
        
        // Re-apply RTL/LTR specific classes
        document.body.classList.remove('rtl', 'ltr');
        document.body.classList.add(lang === 'ar' ? 'rtl' : 'ltr');
        
        console.log('Translation completed successfully'); // Debug log
        
    } catch (error) {
        console.error('Error during translation:', error);
    }
}

// Initialize translation when page loads
document.addEventListener('DOMContentLoaded', () => {
    console.log('DOM Content Loaded'); // Debug log
    
    // Get saved language or use browser language or fallback to Arabic
    const savedLanguage = localStorage.getItem('selectedLanguage') || navigator.language.split('-')[0] || 'ar';
    console.log('Initial language:', savedLanguage); // Debug log
    
    // Initial translation
    translatePage(savedLanguage);
    
    // Add event listener for language toggle button
    const translateBtn = document.getElementById('translateBtn');
    if (translateBtn) {
        translateBtn.addEventListener('click', () => {
            const currentLang = document.documentElement.lang;
            const newLang = currentLang === 'ar' ? 'en' : 'ar';
            console.log('Switching language from', currentLang, 'to', newLang); // Debug log
            translatePage(newLang);
        });
    }
});